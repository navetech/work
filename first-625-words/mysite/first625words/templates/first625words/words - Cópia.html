{% extends "first625words/base.html" %}


{% block title %}
    First625Words
{% endblock %}

{% block main %}

{% comment *%}
<table style="width:100%">
    <caption style='caption-side:top;'>
        Poster availability
    </caption>

    <col>
    <col>
    <col>
    <col>
    <colgroup span="2"></colgroup>
    <colgroup span="3"></colgroup>
    <colgroup span="4"></colgroup>
  
    <thead>
        <tr>
            <th scope="col"></th>
            <th scope="col"></th>
            <th scope="col"></th>
            <th scope="col"></th>
            <th colspan="9" scope="colgroup">English</th>
        </tr>

        <tr>
            <th scope="col"></th>
            <th scope="col"></th>
            <th scope="col"></th>
            <th scope="col"></th>
            <th colspan="2" scope="colgroup">Phrase 1</th>
            <th colspan="3" scope="colgroup">Phrase 2</th>
            <th colspan="4" scope="colgroup">Phrase 3</th>
        </tr>

        <tr>
            <th scope="col">#</th>
            <th scope="col">Base Word</th>
            <th scope="col">Image 1</th>
            <th scope="col">Image 2</th>
            <th scope="col">Texto</th>
            <th scope="col">Ponunciation 1</th>
            <th scope="col">Texto</th>
            <th scope="col">Ponunciation 1</th>
            <th scope="col">Ponunciation 2</th>
            <th scope="col">Texto</th>
            <th scope="col">Ponunciation 1</th>
            <th scope="col">Ponunciation 2</th>
            <th scope="col">Ponunciation 3</th>
        </tr>
    </thead>
</table>
{% endcomment %}


    {% for theme_data in data.for_themes %}
        <table border="1" style="width:100%">
            <caption style='caption-side:top;'>
                {{ theme_data.theme.name }}
            </caption>

            <col>
            <col>

            {% for image_counting in theme_data.counting.images %}
                <col>
            {% endfor %}

            {% for language_counting in theme_data.counting.for_languages %}
                {% for phrase_counting in language_counting.for_phrases %}
                    {% with phrase_columns_count=1 %}
                    {% with phrase_pronunciations_count=phrase_counting.pronunciations|length %}
                    {% with phrase_columns_count=phrase_columns_count|add:phrase_pronunciations_count %}

                    <colgroup span={{ phrase_columns_count }}></colgroup>

                    {% endwith %}
                    {% endwith %}
                    {% endwith %}
                {% endfor %}
            {% endfor %}
        
            <thead>
                <tr>
                    <th scope="col"></th>
                    <th scope="col"></th>

                    {% for image_counting in theme_data.counting.images %}
                        <th scope="col"></th>
                    {% endfor %}

                    {% for language_counting in theme_data.counting.for_languages %}
                        {% with language_columns_count=0 %}

                        {% for phrase_counting in language_counting.for_phrases %}
                            {% with language_columns_count=language_columns_count|add:1 %}
                            {% with language_columns_count=language_columns_count|add:phrase_counting.pronunciations|length %}
                            {% endwith %}
                            {% endwith %}
                        {% endfor %}

                        {% for language in data.languages %}
                            {% if forloop.parentloop.counter0 == forloop.counter0 %}

                                <th colspan={{ language_columns_count }} scope="colgroup">{{ language.name }}</th>

                            {% endif %}
                        {% endfor %}

                        {% endwith %}

                        {% if not forloop.last %}
                            {% for phrase_counting in language_counting.for_phrases %}
                                <th scope="col"></th>

                                {% for pronunciation_counting in phrase_counting.pronunciations %}
                                    <th scope="col"></th>
                                {% endfor %}
                            {% endfor %}
                        {% endif %}
                    {% endfor %}
                </tr>

                <tr>
                    <th scope="col"></th>
                    <th scope="col"></th>

                    {% for image_counting in theme_data.counting.images %}
                        <th scope="col"></th>
                    {% endfor %}

                    {% for language_counting in theme_data.counting.for_languages %}
                        {% for phrase_counting in language_counting.for_phrases %}
                            {% with phrase_columns_count=1 %}
                            {% with phrase_pronunciations_count=phrase_counting.pronunciations|length %}
                            {% with phrase_columns_count=phrase_columns_count|add:phrase_pronunciations_count %}

                            <th colspan={{ phrase_columns_count }} scope="colgroup">Phrase{{ forloop.counter }}</th>

                            {% endwith %}
                            {% endwith %}
                            {% endwith %}
                        {% endfor %}
                    {% endfor %}
                </tr>

                <tr>
                    <th scope="col">#</th>
                    <th scope="col">Base Word</th>

                    {% for image_counting in theme_data.counting.images %}
                        <th scope="col">I{{ forloop.counter }}</th>
                    {% endfor %}

                    {% for language_counting in theme_data.counting.for_languages %}
                        {% for phrase_counting in language_counting.for_phrases %}
                            <th scope="col">Text</th>

                            {% for pronunciation_counting in phrase_counting.pronunciations %}
                                <th scope="col">P{{ forloop.counter }}</th>
                            {% endfor %}
                        {% endfor %}
                    {% endfor %}
                </tr>
            </thead>

            <tbody>
                {% for base_word_data in theme_data.for_base_words %}
                    {% for row in base_word_data.rows %}
                        <tr>
                            {% if forloop.first %}
                                <td>{{ forloop.parentloop.counter }}</td>
                                <td>{{ base_word_data.base_word.text }}</td>
                            {% else %}
                                <td></td>
                                <td></td>
                            {% endif %}

                            {% for image in row.images %}
                                <td>
                                    <a href={{ image.link }}>&#10004;</a>
                                </td>
                            {% endfor %}

                            {% for image_counting in theme_data.counting.images %}
                                {% if forloop.counter0 >= row.images|length %}
                                    <td></td>
                                {% endif %}
                            {% endfor %}

                            {% for language_phrases in row.languages_phrases %}
                                {% with language_index=forloop.counter0 %}

                                {% for phrase in language_phrases %}
                                    {% with phrase_index=forloop.counter0 %}

                                    <td>
                                        {{ phrase.spelling.text }}
                                    </td>

                                    {% for pronunciation in phrase.pronunciations.all %}
                                        <td>
                                            <a href={{ pronunciation.sound }}>&#10004;</a>
                                        </td>
                                    {% endfor %}

                                    {% for language_counting in theme_data.counting.for_languages %}
                                        {% if forloop.counter0 == language_index %}
                                            {% for phrase_counting in language_counting.for_phrases %}
                                                {% if forloop.counter0 == phrase_index %}
                                                    {% for pronunciation in phrase_counting.pronunciations %}
                                                        {% if forloop.counter0 >= phrase.pronunciations.count %}
                                                            <td></td>
                                                        {% endif %}
                                                    {% endfor %}
                                                {% endif %}
                                            {% endfor %}
                                        {% endif %}
                                    {% endfor %}

                                    {% endwith %}
                                {% endfor %}

                                {% for language_counting in theme_data.counting.for_languages %}
                                    {% if forloop.counter0 == language_index %}
                                        {% for phrase_counting in language_counting.for_phrases %}
                                            {% if forloop.counter0 >= language_phrases|length %}
                                                <td></td>

                                                {% for pronunciation in phrase_counting.pronunciations %}
                                                    <td></td>
                                                {% endfor %}
                                            {% endif %}
                                        {% endfor %}
                                    {% endif %}
                                {% endfor %}

                                {% endwith %}
                            {% endfor %}
                        </tr>
                    {% endfor %}
                    <tr>
                        <td>
                            <br>
                        </td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    {% endfor %}
{% endblock %}
