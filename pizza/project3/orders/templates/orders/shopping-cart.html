{% extends "orders/base.html" %}


{% load static %}


{% block title %}
    Shopping Cart
{% endblock %}

{% block main %}
    <h1>Shopping Cart</h1>
    <ul class="list-group pt-4">
        <li class="list-group-item ln-container01">
            <h2>Totals</h2>
            <table style="width:100%">
                <tr>
                    <th>Price</th>
                    <th>Items Qty</th>
                    <th>Products Qty</th>
                 <tr>
                <tr>
                    <td>{{ order.totals.price}}</td>
                    <td>{{ order.totals.items_qty}}</td>
                    <td>{{ order.totals.products_qty}}</td>
                <tr>
            </table>
        </li>
        <li class="list-group-item ln-container01">
            <h2>Items</h2>
            <table style="width:100%">
                <tr>
                    <th>Price</th>
                    <th>Item Qty</th>
                    <th>Products Qty</th>
                    <th>Dish</th>
                    <th>Addings</th>
                </tr>
                {% for item in order.items %}
                    {% if item.addings %}
                    <tr>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td>
                            {% for adding in item.addings %}
                                <table style="width:100%">
                                    <tr>
                                        <th>{{ adding.self.name }}</th>
                                    </tr>
                                </table>
                            {% endfor %}
                        </td>
                    </tr>
                    {% else %}
                    {% endif %}
                    <tr>
                        <td>{{ item.subtotals.price }}</td>
                        <td>{{ item.qty }}</td>
                        <td>{{ item.subtotals.products_qty}}</td>
                        <td>
                            {{ item.flavor.self.name }}
                            {{ item.type.name }}
                            {{ item.dish.name }}
                            {{ item.flavor.size_and_price.size.name }}
                        </td>
                        <td>
                            {% for adding in item.addings %}
                                <table style="width:100%">
                                    <tr>
                                        {% for adding_flavor in adding.flavors %}
                                            <td>{{ adding_flavor.self.name }}</td>
                                            {% if adding_flavor.sizes_and_prices %}
                                            {% else %}
                                                <td>{{ adding_flavor.qty }}</td>
                                            {% endif %}
                                        {% endfor %}
                                    </tr>
                                </table>
                            {% endfor %}
                        </td>
                    <tr>
                {% endfor %}
            </table>
        </li>
        <li class="list-group-item ln-container01">
            {% for item in order.items %}
                <ul class="list-group pt-4">
                    <li class="list-group-item ln-container02">
                        Addings:
                        {% for adding in item.addings %}
                            {% for adding_flavor in adding.flavors %}
                                {{ adding_flavor.self.name }}
                                {% if adding_flavor.sizes_and_prices %}
                                    {% for size_and_price in adding_flavor.sizes_and_prices %}
                                        {% if size_and_price.self %}
                                            {{ size_and_price.self.price }}
                                            {{ size_and_price.qty }}
                                        {% endif %}
                                    {% endfor %}
                                {% else %}
                                    {{ adding_flavor.qty }}
                                {% endif %}
                            {% endfor %}
                        {% endfor %}
                    </li>
                </ul>
            {% endfor %}
        </li>
    </ul>
{% endblock %}
